#!/usr/bin/env python

import argparse
import logging

from agentk.core import agentk_main

logger = logging.getLogger(__name__)


if __name__ == '__main__':
    try:
        parser = argparse.ArgumentParser(description='agentk ssh-agent for kNET.')

        parser.add_argument('-c', '--config', dest='cfg', type=argparse.FileType('r'), required=False,
                            metavar='CONFIGFILE', help='config file')

        args = parser.parse_args()

        agentk_main(args)
    except KeyboardInterrupt:
        logger.info('Keyboard interrupt. Exiting...')
    except SystemExit:
        logger.error('Exiting...')
    except:
        logger.exception('Unhandled exception!')
        logger.error('Exiting...')

